"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5553],{5553:(Eo,I,d)=>{d.r(I),d.d(I,{TabsPageModule:()=>_o});var s=d(4742),v=d(177),_=d(4341),P=d(5841),o=d(3953);let S=(()=>{var t;class c{constructor(){}}return(t=c).\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.VBU({type:t,selectors:[["app-tabs"]],decls:18,vars:0,consts:[["slot","bottom"],["tab","Inicio","href","/tabs/Inicio"],["aria-hidden","true","name","home-outline"],["tab","Buscar","href","/tabs/Buscar"],["aria-hidden","true","name","search-outline"],["tab","Misiones","href","/tabs/Misiones"],["aria-hidden","true","name","barbell-outline"],["tab","perfil","href","/tabs/perfil"],["aria-hidden","true","name","person-circle-outline"]],template:function(e,n){1&e&&(o.j41(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),o.nrm(3,"ion-icon",2),o.j41(4,"ion-label"),o.EFF(5,"Inicio"),o.k0s()(),o.j41(6,"ion-tab-button",3),o.nrm(7,"ion-icon",4),o.j41(8,"ion-label"),o.EFF(9,"Buscar"),o.k0s()(),o.j41(10,"ion-tab-button",5),o.nrm(11,"ion-icon",6),o.j41(12,"ion-label"),o.EFF(13,"Misiones"),o.k0s()(),o.j41(14,"ion-tab-button",7),o.nrm(15,"ion-icon",8),o.j41(16,"ion-label"),o.EFF(17,"Perfil"),o.k0s()()()())},dependencies:[s.iq,s.he,s.Jq,s.qW,s.p4]}),c})();var y=d(2160),g=d(467),k=d(3656),j=d(8413);let T=(()=>{var t;class c{constructor(e,n,i,a,l){this.navCtrl=e,this.modalController=n,this.router=i,this.authService=a,this.toastController=l}irAPaginaDestino(){console.log("entra"),this.router.navigate(["/tabs/perfil"])}presentModal(){console.log("entra"),this.router.navigate(["/tabs/editar-perfil"])}rutina(){console.log("entra"),this.router.navigate(["/tabs/editarrutina"])}cerrarSesion(){this.authService.signOut(),this.presentToast()}presentToast(){var e=this;return(0,g.A)(function*(){yield(yield e.toastController.create({message:"Sesi\xf3n cerrada.",duration:2e3,position:"bottom"})).present()})()}ngOnInit(){}}return(t=c).\u0275fac=function(e){return new(e||t)(o.rXU(k.q9),o.rXU(s.W3),o.rXU(P.Ix),o.rXU(j.u),o.rXU(s.K_))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-configuracion"]],decls:15,vars:0,consts:[["slot","start","fill","clear",3,"click"],["id","back","name","arrow-back"],["id","titulo"],[1,"ion-padding","content-centered"],["id","titulo-contenido"],["shape","round","id","botones-opciones","expand","block",3,"click"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),o.bIt("click",function(){return n.irAPaginaDestino()}),o.nrm(3,"ion-icon",1),o.k0s(),o.j41(4,"ion-title",2),o.EFF(5,"Configuraci\xf3n perfil"),o.k0s()()(),o.j41(6,"ion-content",3)(7,"ion-title",4),o.EFF(8,"Opciones"),o.k0s(),o.j41(9,"ion-button",5),o.bIt("click",function(){return n.presentModal()}),o.EFF(10,"Editar perfil"),o.k0s(),o.j41(11,"ion-button",5),o.bIt("click",function(){return n.rutina()}),o.EFF(12,"Editar rutina"),o.k0s(),o.j41(13,"ion-button",5),o.bIt("click",function(){return n.cerrarSesion()}),o.EFF(14,"Cerrar sesi\xf3n"),o.k0s()())},dependencies:[s.Jm,s.W9,s.eU,s.iq,s.BC,s.ai],styles:['@charset "UTF-8";#back[_ngcontent-%COMP%]{font-size:28px;color:#a9a9a9}#titulo[_ngcontent-%COMP%]{font-size:20px;position:relative;margin:auto;font-style:normal}.content-centered[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}#titulo-contenido[_ngcontent-%COMP%]{text-align:center;position:center;margin-top:20px}#botones-opciones[_ngcontent-%COMP%]{margin:40px 30px 30px}']}),c})();var b=d(7231),q=d(2214),F=d(3273),M=d(9853);const A_firebase={apiKey:"AIzaSyANkZ2O66SwlD8cEfpr4hyD_TEoV9ip-ZM",authDomain:"conoce-eldeporte.firebaseapp.com",projectId:"conoce-eldeporte",storageBucket:"conoce-eldeporte.appspot.com",messagingSenderId:"654408239881",appId:"1:654408239881:web:2e6e71367c8955372121d8",measurementId:"G-CL7JHWEBVW"};var x=d(4324);function D(t,c){if(1&t&&o.nrm(0,"img",18),2&t){const r=o.XpG();o.Y8G("src",r.fotoPerfil,o.B4B)}}function N(t,c){1&t&&o.nrm(0,"ion-icon",19)}function G(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label"),o.EFF(2,"Debes ingresar tu contrase\xf1a"),o.k0s(),o.j41(3,"ion-input",20),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.currentPassword,n)||(i.currentPassword=n),o.Njj(n)}),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(3),o.R50("ngModel",r.currentPassword)}}function U(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-button",21),o.bIt("click",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.saveCorreo())}),o.EFF(1,"Guardar"),o.k0s()}}function w(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-button",22),o.bIt("click",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.savePeso())}),o.EFF(1,"Guardar"),o.k0s()}}function L(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-button",22),o.bIt("click",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.saveAltura())}),o.EFF(1,"Guardar"),o.k0s()}}function V(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-button",23),o.bIt("click",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.toggleEditPassword())}),o.EFF(1,"Cambiar Contrase\xf1a"),o.k0s()}}function X(t,c){if(1&t){const r=o.RV6();o.j41(0,"div",24)(1,"ion-item")(2,"ion-label",25),o.EFF(3,"Contrase\xf1a Actual"),o.k0s(),o.j41(4,"ion-input",26),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.currentPassword,n)||(i.currentPassword=n),o.Njj(n)}),o.k0s()(),o.j41(5,"ion-item")(6,"ion-label",25),o.EFF(7,"Nueva Contrase\xf1a"),o.k0s(),o.j41(8,"ion-input",27),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.newPassword,n)||(i.newPassword=n),o.Njj(n)}),o.k0s()(),o.j41(9,"ion-button",28),o.bIt("click",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.changePassword())}),o.EFF(10,"Guardar Nueva Contrase\xf1a"),o.k0s(),o.j41(11,"ion-button",21),o.bIt("click",function(){o.eBV(r);const n=o.XpG();return o.Njj(n.toggleEditPassword())}),o.EFF(12,"Cancelar"),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(4),o.R50("ngModel",r.currentPassword),o.R7$(4),o.R50("ngModel",r.newPassword),o.R7$(),o.Y8G("disabled",!r.currentPassword||!r.newPassword)}}let $=(()=>{var t;class c{constructor(e,n,i,a,l,p,m,f){let E;this.cdr=e,this.route=n,this.navCtrl=i,this.alertController=a,this.toastController=l,this.router=p,this.firestoreService=m,this.authService=f,this.userProfile=null,this.correo="",this.peso=null,this.altura=null,this.isEditingCorreo=!1,this.isEditingPeso=!1,this.isEditingAltura=!1,this.isEditingPassword=!1,this.currentPassword="",this.newPassword="",this.message="",this.messageType="success",this.fotoPerfil=null,this.nuevaFotoPerfil=null;try{E=(0,q.Sx)()}catch{E=(0,q.Wp)(A_firebase)}this.storage=(0,M.c7)(E)}ngOnInit(){this.authService.user$.subscribe(e=>{e&&this.firestoreService.getUserProfile(e.uid).then(n=>{n&&(this.userProfile=n,this.correo=n.correo,this.peso=n.peso,this.altura=n.altura)}).catch(n=>{console.error("Error al obtener el perfil del usuario:",n)})})}Atras(){this.navCtrl.back()}irAPaginaDestino(){this.router.navigate(["/tabs/configuracion"])}siguiente(){this.router.navigate(["/tabs/editar-perfil"])}toggleEditCorreo(){this.isEditingCorreo=!this.isEditingCorreo}toggleEditPeso(){this.isEditingPeso=!this.isEditingPeso}toggleEditAltura(){this.isEditingAltura=!this.isEditingAltura}saveCorreo(){var e=this;return(0,g.A)(function*(){const n=(0,b.xI)().currentUser;if(n)if(e.currentPassword)try{if(!n.email)return void(yield e.showAlert("Error","No se pudo encontrar el correo electr\xf3nico del usuario."));if(!(yield e.reauthenticateUser(n.email,e.currentPassword)))return void(yield e.showAlert("Error","No se pudo reautenticar al usuario. Aseg\xfarate de que la contrase\xf1a actual sea correcta."));yield(0,b.Ww)(n,e.correo),yield(0,b.gA)(n);const i=(0,F.aU)(),a=(0,F.H9)(i,"usuarios",n.uid);yield(0,F.mZ)(a,{correo:e.correo}),yield e.showAlert("\xc9xito","Correo actualizado correctamente. Se ha enviado un correo de verificaci\xf3n a tu nueva direcci\xf3n. Por favor, revisa tu correo y confirma el cambio."),e.toggleEditCorreo()}catch(i){console.error("Error al actualizar el correo:",i),i instanceof q.g?"auth/email-already-in-use"===i.code?yield e.showAlert("Error","Este correo electr\xf3nico ya est\xe1 en uso por otra cuenta."):"auth/operation-not-allowed"===i.code?yield e.showAlert("Error","La operaci\xf3n de cambio de correo no est\xe1 permitida. Verifica la configuraci\xf3n de Firebase."):yield e.showAlert("Error","No se pudo actualizar el correo. Verifica tus datos."):yield e.showAlert("Error","Ocurri\xf3 un error inesperado.")}else yield e.showAlert("Error","Por favor, ingresa tu contrase\xf1a actual para reautenticaci\xf3n.");else yield e.showAlert("Error","No se pudo encontrar el usuario.")})()}reauthenticateUser(e,n){return(0,g.A)(function*(){if((0,b.xI)().currentUser)try{return b.IX.credential(e,n),yield(0,b.x9)((0,b.xI)(),e,n),!0}catch(a){return console.error("Error de reautenticaci\xf3n:",a),!1}return!1})()}savePeso(){var e=this;return(0,g.A)(function*(){const n=e.authService.getCurrentUser();if(n){const i=n.uid,a={peso:e.peso};try{yield e.firestoreService.updateUserProfile(i,a),yield e.showAlert("\xc9xito","Peso actualizado correctamente."),e.toggleEditPeso()}catch(l){console.error("Error al actualizar el peso:",l),yield e.showAlert("Error","No se pudo actualizar el peso. Verifica tus datos.")}}})()}saveAltura(){var e=this;return(0,g.A)(function*(){const n=e.authService.getCurrentUser();if(n){const i=n.uid,a={altura:e.altura};try{yield e.firestoreService.updateUserProfile(i,a),yield e.showAlert("\xc9xito","Altura actualizada correctamente."),e.toggleEditAltura()}catch(l){console.error("Error al actualizar la altura:",l),yield e.showAlert("Error","No se pudo actualizar la altura. Verifica tus datos.")}}})()}showAlert(e,n){var i=this;return(0,g.A)(function*(){yield(yield i.alertController.create({header:e,message:n,buttons:["OK"]})).present()})()}todosperfil(e){e.preventDefault(),this.cdr.detectChanges()}changePassword(){var e=this;return(0,g.A)(function*(){const n=(0,b.xI)().currentUser,i=null==n?void 0:n.email;if(n&&e.newPassword&&e.currentPassword){if(!(yield e.reauthenticateUser(i,e.currentPassword)))return void(yield e.showAlert("Error","Reautenticaci\xf3n fallida. Verifica tu contrase\xf1a actual."));try{yield(0,b.f3)(n,e.newPassword),console.log("Contrase\xf1a cambiada con \xe9xito"),yield e.showAlert("\xc9xito","La contrase\xf1a se ha cambiado correctamente."),e.toggleEditPassword()}catch(l){console.error("Error al cambiar la contrase\xf1a:",l),yield e.showAlert("Error","No se pudo cambiar la contrase\xf1a. Aseg\xfarate de que la contrase\xf1a actual sea correcta.")}}else yield e.showAlert("Error","Por favor, completa todos los campos.")})()}toggleEditPassword(){this.isEditingPassword=!this.isEditingPassword}cargarNuevaFoto(e){const n=e.target.files[0];if(n){const i=new FileReader;i.onload=a=>{this.fotoPerfil=a.target.result},i.readAsDataURL(n)}}subirFotoPerfil(e){var n=this;return(0,g.A)(function*(){try{const i=`fotos_perfil/${(new Date).getTime()}_${e.name}`,a=(0,M.KR)(n.storage,i);return yield(0,M.D)(a,e),yield(0,M.qk)(a)}catch(i){return void console.error("Error al subir la foto de perfil:",i.message||i)}})()}actualizarFotoPerfil(){var e=this;return(0,g.A)(function*(){if(e.nuevaFotoPerfil)try{const n=yield e.subirFotoPerfil(e.nuevaFotoPerfil);if(n){console.log("Foto de perfil actualizada:",n),e.mostrarAlerta("Atenci\xf3n","Se ha actualizado la foto de perfil.");const i=(0,b.xI)().currentUser;if(i){const a=(0,F.H9)((0,F.aU)(),"usuarios",i.uid);yield(0,F.mZ)(a,{fotoPerfil:n}),console.log("Foto de perfil actualizada en Firestore")}}else console.error("Error al obtener la URL de la foto de perfil")}catch(n){console.error("Error al actualizar la foto de perfil:",n)}else console.error("No se ha seleccionado una nueva foto de perfil")})()}mostrarAlerta(e,n,i=["OK"]){var a=this;return(0,g.A)(function*(){yield(yield a.alertController.create({header:e,message:n,buttons:i})).present()})()}}return(t=c).\u0275fac=function(e){return new(e||t)(o.rXU(o.gRc),o.rXU(P.nX),o.rXU(k.q9),o.rXU(s.hG),o.rXU(s.K_),o.rXU(P.Ix),o.rXU(x.B),o.rXU(j.u))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-editarperfil"]],decls:52,vars:14,consts:[["slot","start","fill","clear",3,"click"],["id","back","name","arrow-back"],["id","titulo"],[1,"contenido"],[1,"profile-container"],["class","responsive-icon",3,"src",4,"ngIf"],["name","person-circle-outline","class","default-icon",4,"ngIf"],["label","Foto de perfil","type","file","accept","image/*",3,"change"],["id","boto",3,"click"],[1,"custom-input",3,"ngModelChange","ngModel","readonly"],[3,"click"],["name","create"],[4,"ngIf"],["shape","round","expand","full",3,"click",4,"ngIf"],["type","number",1,"custom-input",3,"ngModelChange","ngModel","readonly"],["expand","full",3,"click",4,"ngIf"],["shape","round","class","cont","expand","full",3,"click",4,"ngIf"],["class","cont",4,"ngIf"],[1,"responsive-icon",3,"src"],["name","person-circle-outline",1,"default-icon"],["type","password","placeholder","Ingresa tu contrase\xf1a actual",3,"ngModelChange","ngModel"],["shape","round","expand","full",3,"click"],["expand","full",3,"click"],["shape","round","expand","full",1,"cont",3,"click"],[1,"cont"],["position","floating",1,"titu"],["type","password","placeholder","Ingresa tu contrase\xf1a actual",1,"custom-input",3,"ngModelChange","ngModel"],["type","password","placeholder","Ingresa tu nueva contrase\xf1a",1,"custom-input",3,"ngModelChange","ngModel"],["shape","round","expand","full",3,"click","disabled"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),o.bIt("click",function(){return n.irAPaginaDestino()}),o.nrm(3,"ion-icon",1),o.k0s(),o.j41(4,"ion-title",2),o.EFF(5,"Editar perfil"),o.k0s()()(),o.j41(6,"ion-content",3)(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title"),o.EFF(10,"Informaci\xf3n Personal"),o.k0s()(),o.j41(11,"ion-card-content")(12,"div",4),o.DNE(13,D,1,1,"img",5)(14,N,1,0,"ion-icon",6),o.k0s(),o.j41(15,"input",7),o.bIt("change",function(a){return n.cargarNuevaFoto(a)}),o.k0s(),o.j41(16,"ion-button",8),o.bIt("click",function(){return n.actualizarFotoPerfil()}),o.EFF(17,"Actualizar Foto de Perfil"),o.k0s()(),o.j41(18,"ion-card-content")(19,"ion-item")(20,"ion-label"),o.EFF(21,"Tu correo"),o.k0s(),o.j41(22,"ion-input",9),o.mxI("ngModelChange",function(a){return o.DH7(n.correo,a)||(n.correo=a),a}),o.k0s(),o.j41(23,"ion-button",10),o.bIt("click",function(){return n.toggleEditCorreo()}),o.nrm(24,"ion-icon",11),o.k0s()(),o.DNE(25,G,4,1,"ion-item",12)(26,U,2,0,"ion-button",13),o.k0s()(),o.j41(27,"ion-card")(28,"ion-card-header")(29,"ion-card-title"),o.EFF(30,"Datos de Salud"),o.k0s()(),o.j41(31,"ion-card-content")(32,"ion-item")(33,"ion-label"),o.EFF(34,"Tu peso (kg)"),o.k0s(),o.j41(35,"ion-input",14),o.mxI("ngModelChange",function(a){return o.DH7(n.peso,a)||(n.peso=a),a}),o.k0s(),o.j41(36,"ion-button",10),o.bIt("click",function(){return n.toggleEditPeso()}),o.nrm(37,"ion-icon",11),o.k0s(),o.DNE(38,w,2,0,"ion-button",15),o.k0s(),o.j41(39,"ion-item")(40,"ion-label"),o.EFF(41,"Tu altura (cm)"),o.k0s(),o.j41(42,"ion-input",14),o.mxI("ngModelChange",function(a){return o.DH7(n.altura,a)||(n.altura=a),a}),o.k0s(),o.j41(43,"ion-button",10),o.bIt("click",function(){return n.toggleEditAltura()}),o.nrm(44,"ion-icon",11),o.k0s(),o.DNE(45,L,2,0,"ion-button",15),o.k0s()()(),o.j41(46,"ion-card")(47,"ion-card-header")(48,"ion-card-title"),o.EFF(49,"Cambio de Contrase\xf1a"),o.k0s()(),o.DNE(50,V,2,0,"ion-button",16)(51,X,13,3,"div",17),o.k0s()()),2&e&&(o.R7$(13),o.Y8G("ngIf",n.fotoPerfil),o.R7$(),o.Y8G("ngIf",!n.fotoPerfil),o.R7$(8),o.R50("ngModel",n.correo),o.Y8G("readonly",!n.isEditingCorreo),o.R7$(3),o.Y8G("ngIf",n.isEditingCorreo),o.R7$(),o.Y8G("ngIf",n.isEditingCorreo),o.R7$(9),o.R50("ngModel",n.peso),o.Y8G("readonly",!n.isEditingPeso),o.R7$(3),o.Y8G("ngIf",n.isEditingPeso),o.R7$(4),o.R50("ngModel",n.altura),o.Y8G("readonly",!n.isEditingAltura),o.R7$(3),o.Y8G("ngIf",n.isEditingAltura),o.R7$(5),o.Y8G("ngIf",!n.isEditingPassword),o.R7$(),o.Y8G("ngIf",n.isEditingPassword))},dependencies:[v.bT,s.Jm,s.b_,s.I9,s.ME,s.tN,s.W9,s.eU,s.iq,s.$w,s.uz,s.he,s.BC,s.ai,s.su,s.Gw,_.BC,_.vS],styles:['@charset "UTF-8";.custom-input[_ngcontent-%COMP%]{text-align:center;font-size:.9em;--padding-start: 0;--padding-end: 0;margin-bottom:10px}.titu[_ngcontent-%COMP%]{text-align:left;margin-bottom:10px}.cont[_ngcontent-%COMP%]{margin:15px}ion-card[_ngcontent-%COMP%]{--box-shadow: 0px 4px 12px rgba(0, 0, 0, .1);border-radius:12px;margin-bottom:20px}.responsive-icon[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;margin-bottom:10px;margin-left:33%}.default-icon[_ngcontent-%COMP%]{font-size:80px;color:#999;margin-bottom:10px;margin-left:35%}input[type=file][_ngcontent-%COMP%]{display:block;margin:10px 0;padding:5px}#boto[_ngcontent-%COMP%]{margin-top:10px;padding:10px;color:#fff;width:100%}']}),c})();var u=d(9967);function O(t,c){if(1&t&&(o.j41(0,"ion-select-option",9),o.EFF(1),o.k0s()),2&t){const r=c.$implicit;o.Y8G("value",r),o.R7$(),o.SpI(" ",r," ")}}function Y(t,c){if(1&t&&(o.j41(0,"ion-select-option",9),o.EFF(1),o.k0s()),2&t){const r=c.$implicit;o.Y8G("value",r),o.R7$(),o.SpI(" ",r," ")}}function B(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label"),o.EFF(2,"Selecciona una rutina"),o.k0s(),o.j41(3,"ion-select",10),o.bIt("ionChange",function(n){o.eBV(r);const i=o.XpG();return o.Njj(i.seleccionarRutina(n.detail.value))}),o.DNE(4,Y,2,2,"ion-select-option",6),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(4),o.Y8G("ngForOf",r.todasLasRutinas.disponibles)}}function z(t,c){1&t&&(o.j41(0,"ion-item")(1,"ion-label"),o.EFF(2,"No hay rutinas disponibles."),o.k0s()())}let H=(()=>{var t;class c{constructor(e,n,i,a,l,p,m){this.navCtrl=e,this.router=n,this.firestoreService=i,this.toastController=a,this.authService=l,this.firestore=p,this.alertController=m,this.diasDeLaSemana=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes"],this.rutina=[],this.todasLasRutinas={disponibles:[]},this.rutinaSeleccionada=null,this.tiposDeRutinasPermitidos=["abdomen","hombro","pierna","brazo","pecho"]}irAPaginaDestino1(){console.log("entra"),this.router.navigate(["/tabs/configuracion"])}inicio(){console.log("entra"),1!=this.result&&3!=this.result&&2==this.result&&this.router.navigate(["/tabs/Inicio"])}ngOnInit(){console.log("Cargando todas las rutinas..."),this.cargarRutinas(),this.verificarAutenticacion()}seleccionarRutina(e){this.rutinaSeleccionada=e,console.log(this.rutinaSeleccionada)}cargarRutinas(){var e=this;return(0,g.A)(function*(){const n=e.authService.getCurrentUser();if(n)try{const i=(0,u.rJ)(e.firestore,"Rutinas/PlyuiOZ5ex4zKxUcZGTO/Tipo_rutina"),l=(yield(0,u.GG)(i)).docs.map(h=>h.data().nombre_tipo_rutina),p=(0,u.rJ)(e.firestore,`usuarios/${n.uid}/rutinas`),m=yield(0,u.GG)(p),f=new Set;m.forEach(h=>{const C=h.data();e.diasDeLaSemana.forEach(bo=>{(C[bo]||[]).forEach(Co=>{f.add(Co)})})});const E=l.filter(h=>!f.has(h)).filter(h=>e.tiposDeRutinasPermitidos.includes(h));e.todasLasRutinas.disponibles=Array.from(new Set(E)).slice(0,5),console.log("Rutinas disponibles:",e.todasLasRutinas.disponibles)}catch(i){console.error("Error al cargar las rutinas:",i)}else console.warn("Debes iniciar sesi\xf3n para ver tus rutinas.")})()}verificarAutenticacion(){const e=(0,b.xI)();(0,b.hg)(e,n=>{n?this.cargarRutinas():this.authService.signOut()})}actualizarRutina(e,n){var i=this;return(0,g.A)(function*(){if(e&&n)try{const a=i.authService.getCurrentUser();if(!a)return void console.warn("Debes iniciar sesi\xf3n para actualizar la rutina.");const l=(0,u.H9)(i.firestore,`usuarios/${a.uid}/rutinas/rutina_semanal`),p=yield(0,u.x7)(l);if(!p.exists())return void console.error(`No existe el documento rutina_semanal para el usuario: ${a.uid}`);const f=p.data().rutina;if(!f[e])return void console.error(`No hay rutina para el d\xeda: ${e}`);f[e]=[n],yield(0,u.mZ)(l,{[`rutina.${e}`]:f[e]}),console.log("Rutina actualizada correctamente"),i.mostrarAlerta("Alerta","La rutina ha sido actualizada correctamente.")}catch(a){console.error("Error al actualizar la rutina:",a),i.mostrarAlerta("Alerta","La rutina no ha sido actualizada correctamente.")}else console.warn("D\xeda o rutina seleccionada no v\xe1lidos.")})()}obtenerEjercicios(e){return[{nombre_tipo_rutina:e}]}onSelect(e){return this.diaSeleccionado=e,this.mostrarToast(`Seleccionaste ${e}`,"success"),e&&0!==e.length?this.result=2:(this.mostrarToast("Debes seleccionar un d\xeda."),this.result=1)}mostrarToast(e,n="danger"){var i=this;return(0,g.A)(function*(){(yield i.toastController.create({message:e,duration:2e3,color:n})).present()})()}mostrarAlerta(e,n,i=["OK"]){var a=this;return(0,g.A)(function*(){yield(yield a.alertController.create({header:e,message:n,buttons:i})).present()})()}}return(t=c).\u0275fac=function(e){return new(e||t)(o.rXU(k.q9),o.rXU(P.Ix),o.rXU(x.B),o.rXU(s.K_),o.rXU(j.u),o.rXU(u._7),o.rXU(s.hG))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-editarrutina"]],decls:21,vars:3,consts:[["slot","start","fill","clear",3,"click"],["id","back","name","arrow-back"],["id","titulo"],["id","contenido"],["id","titulo2"],["label-placement","stacked",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","boton","shape","round","expand","full",3,"click"],[3,"value"],["label-placement","stacked","interface","popover",3,"ionChange"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),o.bIt("click",function(){return n.irAPaginaDestino1()}),o.nrm(3,"ion-icon",1),o.k0s(),o.j41(4,"ion-title",2),o.EFF(5,"Edita tu rutina"),o.k0s()()(),o.j41(6,"ion-content")(7,"ion-card",3)(8,"ion-card-header")(9,"ion-card-title",4),o.EFF(10,"Seleccione el d\xeda que quiere editar rutina"),o.k0s()(),o.j41(11,"ion-list")(12,"ion-item")(13,"ion-label"),o.EFF(14,"Selecciona un d\xeda"),o.k0s(),o.j41(15,"ion-select",5),o.bIt("ionChange",function(a){return n.onSelect(a.detail.value)}),o.DNE(16,O,2,2,"ion-select-option",6),o.k0s()(),o.DNE(17,B,5,1,"ion-item",7)(18,z,3,0,"ion-item",7),o.k0s(),o.j41(19,"ion-button",8),o.bIt("click",function(){return n.actualizarRutina(n.diaSeleccionado,n.rutinaSeleccionada)}),o.EFF(20," Editar rutina "),o.k0s()()()),2&e&&(o.R7$(16),o.Y8G("ngForOf",n.diasDeLaSemana),o.R7$(),o.Y8G("ngIf",n.todasLasRutinas.disponibles&&n.todasLasRutinas.disponibles.length>0),o.R7$(),o.Y8G("ngIf",0===(null==n.todasLasRutinas.disponibles?null:n.todasLasRutinas.disponibles.length)))},dependencies:[v.Sq,v.bT,s.Jm,s.b_,s.ME,s.tN,s.W9,s.eU,s.iq,s.uz,s.he,s.nf,s.Nm,s.Ip,s.BC,s.ai,s.Je],styles:["#titulo2[_ngcontent-%COMP%]{text-align:center;font-size:x-large}ion-card[_ngcontent-%COMP%]{--box-shadow: 0px 4px 12px rgba(0, 0, 0, .1);border-radius:12px;margin-bottom:20px}#boton[_ngcontent-%COMP%]{margin:20px}"]}),c})();function J(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label"),o.EFF(2),o.k0s(),o.j41(3,"ion-checkbox",16),o.mxI("ngModelChange",function(n){const i=o.eBV(r).$implicit;return o.DH7(i.selected,n)||(i.selected=n),o.Njj(n)}),o.bIt("ionChange",function(){const n=o.eBV(r).$implicit,i=o.XpG();return o.Njj(i.seleccionarEquipo(n))}),o.k0s()()}if(2&t){const r=c.$implicit;o.R7$(2),o.JRh(r.nombre_fantasia),o.R7$(),o.R50("ngModel",r.selected)}}function W(t,c){if(1&t&&(o.j41(0,"ion-select-option",19),o.EFF(1),o.k0s()),2&t){const r=c.$implicit;o.Y8G("value",r.id),o.R7$(),o.SpI(" ",r.logro," ")}}function K(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-select",17),o.bIt("ionChange",function(n){o.eBV(r);const i=o.XpG();return o.Njj(i.seleccionarLogro(n.detail.value))}),o.DNE(2,W,2,2,"ion-select-option",18),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(2),o.Y8G("ngForOf",r.logros)}}function Z(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-select",20),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.campoSeleccionado2,n)||(i.campoSeleccionado2=n),o.Njj(n)}),o.j41(2,"ion-label"),o.EFF(3,"Selecciona qu\xe9 quieres editar"),o.k0s(),o.j41(4,"ion-select-option",21),o.EFF(5,"Logro"),o.k0s(),o.j41(6,"ion-select-option",22),o.EFF(7,"Fecha"),o.k0s()()()}if(2&t){const r=o.XpG();o.R7$(),o.R50("ngModel",r.campoSeleccionado2)}}function Q(t,c){if(1&t&&(o.j41(0,"ion-select-option",19),o.EFF(1),o.nI1(2,"date"),o.k0s()),2&t){const r=c.$implicit;o.Y8G("value",r.id),o.R7$(),o.SpI(" ",o.i5U(2,2,r.fecha_partido.toDate(),"dd/MM/yyyy")," ")}}function oo(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-select",23),o.bIt("ionChange",function(n){o.eBV(r);const i=o.XpG();return o.Njj(i.seleccionarPartido(n.detail.value))}),o.DNE(2,Q,3,5,"ion-select-option",18),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(2),o.Y8G("ngForOf",r.partidos)}}function eo(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-select",20),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.campoSeleccionado2,n)||(i.campoSeleccionado2=n),o.Njj(n)}),o.j41(2,"ion-label"),o.EFF(3,"Selecciona qu\xe9 quieres editar"),o.k0s(),o.j41(4,"ion-select-option",24),o.EFF(5,"Contrincante"),o.k0s(),o.j41(6,"ion-select-option",22),o.EFF(7,"Fecha"),o.k0s(),o.j41(8,"ion-select-option",25),o.EFF(9,"Resultado"),o.k0s(),o.j41(10,"ion-select-option",8),o.EFF(11,"Ubicaci\xf3n"),o.k0s()()()}if(2&t){const r=o.XpG();o.R7$(),o.R50("ngModel",r.campoSeleccionado2)}}let no=(()=>{var t;class c{constructor(e,n,i){this.authService=e,this.router=n,this.firestore=i,this.equipos=[],this.campoSeleccionado="",this.campoSeleccionado2="",this.nuevoValor="",this.equipoSeleccionado={},this.logros=[],this.partidos=[]}ngOnInit(){this.authService.esAdministrador()?console.log("Usuario con acceso de administrador"):console.log("Usuario con acceso est\xe1ndar"),this.obtenerEquiposAdministrados()}irAPaginaDestino(){this.router.navigate(["/tabs/perfil"])}mostrarToast(e,n){console.log(e)}verificarAutenticacion(){const e=(0,b.xI)();(0,b.hg)(e,n=>{n?this.obtenerEquiposAdministrados():this.authService.signOut()})}obtenerEquiposAdministrados(){var e=this;return(0,g.A)(function*(){const n=e.authService.getCurrentUser();if(!n)return void e.mostrarToast("Debes iniciar sesi\xf3n para ver tu rutina.","warning");const i=(0,u.rJ)(e.firestore,`usuarios/${n.uid}/administracion`);var a;(0,u.xs)(i,{idField:"id"}).subscribe({next:(a=(0,g.A)(function*(l){e.equipos=[];for(const p of l){const m=p.id_equipo;if(m&&m.id){const f=m.id;console.log(`Buscando equipo con ID: ${f}`);const E=(0,u.H9)(e.firestore,`Equipos/${f}`),h=yield(0,u.x7)(E);if(console.log(E),h.exists()){const C=h.data();C?(e.equipos.push({id:h.id,...C}),console.log(`Equipo encontrado: ${C.nombre}`)):console.error("Los datos del equipo son nulos o indefinidos.")}else console.error(`El documento del equipo con ID ${f} no existe.`)}else console.error("El ID del equipo es inv\xe1lido.")}console.log("Equipos administrados: ",e.equipos)}),function(p){return a.apply(this,arguments)}),error:a=>{console.error("Error al obtener equipos: ",a),e.mostrarToast("Ocurri\xf3 un error al obtener los equipos.","danger")}})})()}cargarLogros(){var e=this;return(0,g.A)(function*(){console.log("Entrando a cargarLogros()");try{var n;const i=null===(n=e.equipoSeleccionado)||void 0===n?void 0:n.id;if(!i)return void console.warn("ID del equipo no est\xe1 definido. Aseg\xfarate de seleccionar un equipo antes de cargar logros.");const a=(0,u.rJ)(e.firestore,`Equipos/${i}/Logros`);console.log("Obteniendo documentos de:",a.path);const l=yield(0,u.GG)(a);l.empty?console.warn("No se encontraron documentos en la colecci\xf3n 'Logros' para el equipo con ID:",i):(e.logros=l.docs.map(p=>({id:p.id,...p.data()})),console.log("Documentos obtenidos:",e.logros))}catch(i){console.error("Error al obtener logros:",i)}})()}seleccionarLogro(e){this.logroSeleccionadoId=e}cargarPartidos(){var e=this;return(0,g.A)(function*(){try{var n;const i=null===(n=e.equipoSeleccionado)||void 0===n?void 0:n.id;if(!i)return void console.warn("ID del equipo no est\xe1 definido. Aseg\xfarate de seleccionar un equipo antes de cargar logros.");const a=(0,u.rJ)(e.firestore,`Equipos/${i}/Partidos`);console.log("Obteniendo documentos de:",a.path);const l=yield(0,u.GG)(a);l.empty?console.warn("No se encontraron documentos en la colecci\xf3n 'Partidos' para el equipo con ID:",i):(e.partidos=l.docs.map(p=>({id:p.id,...p.data()})),console.log("Documentos obtenidos:",e.partidos))}catch(i){console.error("Error al obtener partidos:",i)}})()}seleccionarPartido(e){this.partidoSeleccionadoId=e}seleccionarEquipo(e){this.equipoSeleccionado={...e},this.cargarLogros(),this.cargarPartidos(),console.log("Equipo seleccionado: ",this.equipoSeleccionado)}editarEquipo(){const e=this.authService.getCurrentUser();if(!(e&&this.equipoSeleccionado&&this.nuevoValor&&this.campoSeleccionado))return console.warn("Completa todos los campos requeridos."),console.log(e),console.log(this.equipoSeleccionado),console.log("Campo seleccionado:",this.campoSeleccionado),void console.log("Nuevo valor:",this.nuevoValor);const n=this.equipoSeleccionado.id,i=(0,u.H9)(this.firestore,`Equipos/${n}`);if("descripcion"==this.campoSeleccionado||"lugar"==this.campoSeleccionado)(0,u.mZ)(i,{[this.campoSeleccionado]:this.nuevoValor}).then(()=>{console.log(`Campo ${this.campoSeleccionado} actualizado a: ${this.nuevoValor}`),this.equipoSeleccionado={},this.nuevoValor=""}).catch(a=>{console.error("Error al actualizar el equipo: ",a)});else if("logros"==this.campoSeleccionado){const a=this.logroSeleccionadoId,l=(0,u.H9)(this.firestore,`Equipos/${n}/Logros/${a}`);(0,u.x7)(l).then(p=>{p.exists()?(0,u.mZ)(l,{[this.campoSeleccionado2]:this.nuevoValor}).then(()=>{console.log(`Campo ${this.campoSeleccionado2} actualizado a: ${this.nuevoValor}`),this.equipoSeleccionado={},this.nuevoValor=""}).catch(m=>{console.error("Error al actualizar el logro: ",m)}):console.error(`El documento del logro con ID ${a} no existe.`)}).catch(p=>{console.error("Error al verificar la existencia del logro: ",p)})}else{const a=this.partidoSeleccionadoId,l=(0,u.H9)(this.firestore,`Equipos/${n}/Partidos/${a}`);(0,u.x7)(l).then(p=>{p.exists()?(0,u.mZ)(l,{[this.campoSeleccionado2]:this.nuevoValor}).then(()=>{console.log(`Campo ${this.campoSeleccionado2} actualizado a: ${this.nuevoValor}`),this.equipoSeleccionado={},this.nuevoValor=""}).catch(m=>{console.error("Error al actualizar el logro: ",m)}):console.error(`El documento del logro con ID ${a} no existe.`)}).catch(p=>{console.error("Error al verificar la existencia del logro: ",p)})}}}return(t=c).\u0275fac=function(e){return new(e||t)(o.rXU(j.u),o.rXU(P.Ix),o.rXU(u._7))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-modificar-equipo"]],decls:42,vars:7,consts:[["slot","start","fill","clear",3,"click"],["id","back","name","arrow-back"],["id","titulo"],["id","contenido"],[4,"ngFor","ngForOf"],["id","campo","placeholder","Selecciona un campo a editar",3,"ngModelChange","ngModel"],["color","danger"],["value","descripcion"],["value","ubicacion"],["value","partidos"],["value","logros"],[4,"ngIf"],["lines","full"],["id","nuevo","position","stacked"],["type","text","minlength","3","maxlength","200",3,"ngModelChange","ngModel"],["id","boton","expand","full","shape","round",3,"click"],[3,"ngModelChange","ionChange","ngModel"],["placeholder","Selecciona un logro",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Selecciona un campo a editar",3,"ngModelChange","ngModel"],["value","logro"],["value","fecha"],["placeholder","Selecciona un partido",3,"ionChange"],["value","contrincante"],["value","resultado"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),o.bIt("click",function(){return n.irAPaginaDestino()}),o.nrm(3,"ion-icon",1),o.k0s(),o.j41(4,"ion-title",2),o.EFF(5,"Edita tu equipo"),o.k0s()()(),o.j41(6,"ion-content",3)(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title"),o.EFF(10,"Selecciona el equipo que quieras editar"),o.k0s()(),o.j41(11,"ion-card-content")(12,"ion-list"),o.DNE(13,J,4,2,"ion-item",4),o.k0s()()(),o.j41(14,"ion-card")(15,"ion-list")(16,"ion-item")(17,"ion-select",5),o.mxI("ngModelChange",function(a){return o.DH7(n.campoSeleccionado,a)||(n.campoSeleccionado=a),a}),o.j41(18,"div"),o.EFF(19,"Selecciona el campo que deseas editar "),o.j41(20,"ion-text",6),o.EFF(21,"(Requerido)"),o.k0s()(),o.j41(22,"ion-select-option",7),o.EFF(23,"Descripci\xf3n"),o.k0s(),o.j41(24,"ion-select-option",8),o.EFF(25,"Lugar"),o.k0s(),o.j41(26,"ion-select-option",9),o.EFF(27,"Partidos"),o.k0s(),o.j41(28,"ion-select-option",10),o.EFF(29,"Logros"),o.k0s()()()()(),o.j41(30,"ion-card"),o.DNE(31,K,3,1,"ion-item",11)(32,Z,8,1,"ion-item",11)(33,oo,3,1,"ion-item",11)(34,eo,12,1,"ion-item",11),o.k0s(),o.j41(35,"ion-card")(36,"ion-item",12)(37,"ion-label",13),o.EFF(38,"Escribe el nuevo valor"),o.k0s(),o.j41(39,"ion-input",14),o.mxI("ngModelChange",function(a){return o.DH7(n.nuevoValor,a)||(n.nuevoValor=a),a}),o.k0s()(),o.j41(40,"ion-button",15),o.bIt("click",function(){return n.editarEquipo()}),o.EFF(41,"Editar"),o.k0s()()()),2&e&&(o.R7$(13),o.Y8G("ngForOf",n.equipos),o.R7$(4),o.R50("ngModel",n.campoSeleccionado),o.R7$(14),o.Y8G("ngIf","logros"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","logros"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","partidos"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","partidos"===n.campoSeleccionado),o.R7$(5),o.R50("ngModel",n.nuevoValor))},dependencies:[v.Sq,v.bT,s.Jm,s.b_,s.I9,s.ME,s.tN,s.eY,s.W9,s.eU,s.iq,s.$w,s.uz,s.he,s.nf,s.Nm,s.Ip,s.IO,s.BC,s.ai,s.hB,s.Je,s.Gw,_.BC,_.xh,_.tU,_.vS,v.vh],styles:["ion-card[_ngcontent-%COMP%]{--box-shadow: 0px 4px 12px rgba(0, 0, 0, .1);border-radius:12px;margin-bottom:10px}#boton[_ngcontent-%COMP%]{margin:20px}#nuevo[_ngcontent-%COMP%]{font-size:x-large}"]}),c})();function io(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label"),o.EFF(2),o.k0s(),o.j41(3,"ion-checkbox",10),o.bIt("ionChange",function(){const n=o.eBV(r).$implicit,i=o.XpG();return o.Njj(i.seleccionarEquipo(n))}),o.k0s()()}if(2&t){const r=c.$implicit,e=o.XpG();o.R7$(2),o.JRh(r.nombre_fantasia),o.R7$(),o.Y8G("checked",e.equipoSeleccionadoId===r.id)}}function to(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label",11),o.EFF(2,"Logro"),o.k0s(),o.j41(3,"ion-input",12),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.nuevoLogro,n)||(i.nuevoLogro=n),o.Njj(n)}),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(3),o.R50("ngModel",r.nuevoLogro)}}function ro(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label"),o.EFF(2,"Fecha del logro"),o.k0s(),o.j41(3,"ion-datetime",13),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.fechaLogro,n)||(i.fechaLogro=n),o.Njj(n)}),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(3),o.R50("ngModel",r.fechaLogro)}}function ao(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label",11),o.EFF(2,"Contrincante"),o.k0s(),o.j41(3,"ion-input",14),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.nuevoPartidoContrincante,n)||(i.nuevoPartidoContrincante=n),o.Njj(n)}),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(3),o.R50("ngModel",r.nuevoPartidoContrincante)}}function so(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label",11),o.EFF(2,"Ubicaci\xf3n"),o.k0s(),o.j41(3,"ion-input",15),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.nuevoPartidoUbicacion,n)||(i.nuevoPartidoUbicacion=n),o.Njj(n)}),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(3),o.R50("ngModel",r.nuevoPartidoUbicacion)}}function co(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-select",16),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.resultadoPartido,n)||(i.resultadoPartido=n),o.Njj(n)}),o.j41(2,"ion-select-option",17),o.EFF(3,"Ganado"),o.k0s(),o.j41(4,"ion-select-option",18),o.EFF(5,"Perdido"),o.k0s()()()}if(2&t){const r=o.XpG();o.R7$(),o.R50("ngModel",r.resultadoPartido)}}function lo(t,c){if(1&t){const r=o.RV6();o.j41(0,"ion-item")(1,"ion-label"),o.EFF(2,"Fecha en la que se realiz\xf3 el partido"),o.k0s(),o.j41(3,"ion-datetime",13),o.mxI("ngModelChange",function(n){o.eBV(r);const i=o.XpG();return o.DH7(i.fechaPartido,n)||(i.fechaPartido=n),o.Njj(n)}),o.k0s()()}if(2&t){const r=o.XpG();o.R7$(3),o.R50("ngModel",r.fechaPartido)}}let uo=(()=>{var t;class c{constructor(e,n,i){this.router=e,this.firestore=n,this.authService=i,this.equipos=[],this.equipoSeleccionado={},this.equipoSeleccionadoId=null}ngOnInit(){this.obtenerEquiposAdministrados()}irAPaginaDestino(){this.router.navigate(["/tabs/perfil"])}mostrarToast(e,n){console.log(e)}obtenerEquiposAdministrados(){var e=this;return(0,g.A)(function*(){const n=e.authService.getCurrentUser();if(!n)return void e.mostrarToast("Debes iniciar sesi\xf3n para ver tu rutina.","warning");const i=(0,u.rJ)(e.firestore,`usuarios/${n.uid}/administracion`);var a;(0,u.xs)(i,{idField:"id"}).subscribe({next:(a=(0,g.A)(function*(l){e.equipos=[];for(const p of l){const m=p.id_equipo;if(m&&m.id){const f=m.id;console.log(`Buscando equipo con ID: ${f}`);const E=(0,u.H9)(e.firestore,`Equipos/${f}`),h=yield(0,u.x7)(E);if(h.exists()){const C=h.data();console.log("Datos del equipo obtenidos: ",C),C?(e.equipos.push({id:h.id,...C}),console.log(`Equipo encontrado: ${C.nombre_fantasia}`)):console.error("Los datos del equipo son nulos o indefinidos.")}else console.error(`El documento del equipo con ID ${f} no existe.`)}else console.error("El ID del equipo es inv\xe1lido.")}console.log("Equipos administrados: ",e.equipos)}),function(p){return a.apply(this,arguments)}),error:a=>{console.error("Error al obtener equipos: ",a),e.mostrarToast("Ocurri\xf3 un error al obtener los equipos.","danger")}})})()}seleccionarEquipo(e){this.equipoSeleccionadoId===e.id?(this.equipoSeleccionadoId=null,this.equipoSeleccionado=null):(this.equipoSeleccionadoId=e.id,this.equipoSeleccionado=e),console.log("Equipo seleccionado:",this.equipoSeleccionado)}agregarDato(){var e=this;return(0,g.A)(function*(){if(!e.equipoSeleccionado)return void e.mostrarToast("Por favor, selecciona un equipo antes de agregar datos.","warning");const n=e.equipoSeleccionado.id;if("Logros"===e.campoSeleccionado){const i=(0,u.rJ)(e.firestore,`Equipos/${n}/Logros`);try{yield(0,u.gS)(i,{logro:e.nuevoLogro,fecha:e.fechaLogro}),console.log("Logro agregado exitosamente."),e.nuevoLogro="",e.fechaLogro=""}catch(a){console.error("Error al agregar logro: ",a)}}else if("Partidos"===e.campoSeleccionado){const i=(0,u.rJ)(e.firestore,`Equipos/${n}/Partidos`);try{yield(0,u.gS)(i,{contrincante:e.nuevoPartidoContrincante,ubicacion:e.nuevoPartidoUbicacion,resultado:e.resultadoPartido,fecha:e.fechaPartido}),console.log("Partido agregado exitosamente."),e.nuevoPartidoContrincante="",e.nuevoPartidoUbicacion="",e.resultadoPartido="",e.fechaPartido=""}catch(a){console.error("Error al agregar partido: ",a)}}})()}}return(t=c).\u0275fac=function(e){return new(e||t)(o.rXU(P.Ix),o.rXU(u._7),o.rXU(j.u))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-agregar-logros-ypartidos"]],decls:25,vars:8,consts:[["slot","start","fill","clear",3,"click"],["id","back","name","arrow-back"],["id","titulo"],["id","contenido"],[4,"ngFor","ngForOf"],["label","Seleccione qu\xe9 quiere agregar","label-placement","floating",3,"ngModelChange","ngModel"],["value","Logros"],["value","Partidos"],[4,"ngIf"],["id","boton","shape","round","expand","full",3,"click"],["slot","start",3,"ionChange","checked"],["position","stacked"],["placeholder","Escriba cu\xe1l es el nuevo logro","label-placement","floating","type","text",3,"ngModelChange","ngModel"],["presentation","date",3,"ngModelChange","ngModel"],["placeholder","Nombre del contrincante","label-placement","floating","type","text",3,"ngModelChange","ngModel"],["placeholder","Ubicaci\xf3n del partido","label-placement","floating","type","text",3,"ngModelChange","ngModel"],["label","Resultado del partido","label-placement","floating",3,"ngModelChange","ngModel"],["value","Ganado"],["value","Perdido"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),o.bIt("click",function(){return n.irAPaginaDestino()}),o.nrm(3,"ion-icon",1),o.k0s(),o.j41(4,"ion-title",2),o.EFF(5,"Agrega datos a tu equipo"),o.k0s()()(),o.j41(6,"ion-content",3)(7,"ion-card")(8,"ion-list"),o.DNE(9,io,4,2,"ion-item",4),o.k0s()(),o.j41(10,"ion-card")(11,"ion-item")(12,"ion-select",5),o.mxI("ngModelChange",function(a){return o.DH7(n.campoSeleccionado,a)||(n.campoSeleccionado=a),a}),o.j41(13,"ion-select-option",6),o.EFF(14,"Logros"),o.k0s(),o.j41(15,"ion-select-option",7),o.EFF(16,"Partidos"),o.k0s()()(),o.DNE(17,to,4,1,"ion-item",8)(18,ro,4,1,"ion-item",8)(19,ao,4,1,"ion-item",8)(20,so,4,1,"ion-item",8)(21,co,6,1,"ion-item",8)(22,lo,4,1,"ion-item",8),o.j41(23,"ion-button",9),o.bIt("click",function(){return n.agregarDato()}),o.EFF(24,"Agregar"),o.k0s()()()),2&e&&(o.R7$(9),o.Y8G("ngForOf",n.equipos),o.R7$(3),o.R50("ngModel",n.campoSeleccionado),o.R7$(5),o.Y8G("ngIf","Logros"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","Logros"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","Partidos"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","Partidos"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","Partidos"===n.campoSeleccionado),o.R7$(),o.Y8G("ngIf","Partidos"===n.campoSeleccionado))},dependencies:[v.Sq,v.bT,s.Jm,s.b_,s.eY,s.W9,s.A9,s.eU,s.iq,s.$w,s.uz,s.he,s.nf,s.Nm,s.Ip,s.BC,s.ai,s.hB,s.Je,s.Gw,_.BC,_.vS],styles:["ion-card[_ngcontent-%COMP%]{--box-shadow: 0px 4px 12px rgba(0, 0, 0, .1);border-radius:12px;margin-bottom:20px}#boton[_ngcontent-%COMP%]{margin:20px}"]}),c})();var po=d(9636),R=d(1626);function go(t,c){if(1&t&&(o.j41(0,"option",16),o.EFF(1),o.k0s()),2&t){const r=c.$implicit;o.Y8G("value",r.id),o.R7$(),o.JRh(r.nombre_fantasia)}}const fo=[{path:"",component:S,children:[{path:"Inicio",loadChildren:()=>Promise.all([d.e(2076),d.e(8645)]).then(d.bind(d,8645)).then(t=>t.InicioPageModule)},{path:"Buscar",loadChildren:()=>Promise.all([d.e(2076),d.e(3491)]).then(d.bind(d,3491)).then(t=>t.BuscarPageModule)},{path:"Misiones",loadChildren:()=>Promise.all([d.e(2076),d.e(4712)]).then(d.bind(d,4712)).then(t=>t.MisionesPageModule)},{path:"perfil",loadChildren:()=>Promise.all([d.e(2076),d.e(4031)]).then(d.bind(d,4031)).then(t=>t.PerfilPageModule)},{path:"equipo/:nombre_equipo",component:y.h},{path:"configuracion",component:T},{path:"editar-perfil",component:$},{path:"editarrutina",component:H},{path:"modificarEquipo",component:no},{path:"AgregarLogrosPartidos",component:uo},{path:"Notificaciones",component:(()=>{var t;class c{constructor(e,n,i,a,l,p){this.firestore=e,this.router=n,this.authService=i,this.toastController=a,this.notificacionService=l,this.http=p,this.equipos=[],this.equipoSeleccionado="",this.tipoNotificacion="",this.mensajeNotificacion="",this.equipoNombreSeleccionado=""}ngOnInit(){this.obtenerEquiposAdministrados()}obtenerEquiposAdministrados(){var e=this;return(0,g.A)(function*(){const n=e.authService.getCurrentUser();if(!n)return void console.log("Debes iniciar sesi\xf3n para ver tu rutina.","warning");const i=(0,F.rJ)(e.firestore,`usuarios/${n.uid}/administracion`);var a;(0,u.xs)(i,{idField:"id"}).subscribe({next:(a=(0,g.A)(function*(l){e.equipos=[];for(const p of l){const m=p.id_equipo;if(m&&m.id){const f=m.id;console.log(`Buscando equipo con ID: ${f}`);const E=(0,F.H9)(e.firestore,`Equipos/${f}`),h=yield(0,F.x7)(E);if(h.exists()){const C=h.data();C?(e.equipos.push({id:h.id,...C}),console.log(`Equipo encontrado: ${C.nombre}`)):console.error("Los datos del equipo son nulos o indefinidos.")}else console.error(`El documento del equipo con ID ${f} no existe.`)}else console.error("El ID del equipo es inv\xe1lido.")}console.log("Equipos administrados: ",e.equipos)}),function(p){return a.apply(this,arguments)}),error:a=>{console.error("Error al obtener equipos: ",a),console.log("Ocurri\xf3 un error al obtener los equipos.","danger")}})})()}irAPaginaDestino(){this.router.navigate(["/tabs/perfil"])}mostrarToast(e,n){var i=this;return(0,g.A)(function*(){(yield i.toastController.create({message:e,duration:2e3,color:n,position:"bottom"})).present()})()}onEquipoChange(e){const n=this.equipos.find(i=>i.id===e);n&&(this.equipoNombreSeleccionado=n.nombre_fantasia)}enviarNotificacion(){var e=this;return(0,g.A)(function*(){if(!e.equipoSeleccionado||!e.tipoNotificacion||!e.mensajeNotificacion)return void e.mostrarToast("Por favor completa todos los campos.","warning");const n={notificacion:e.mensajeNotificacion,equipo_notificacion:e.equipoNombreSeleccionado,tipo:e.tipoNotificacion,fecha:new Date,equipoId:e.equipoSeleccionado},i=(0,F.rJ)(e.firestore,"notificaciones");try{yield(0,F.gS)(i,n),yield e.notificacionService.enviarNotificacionesMasivas(e.equipoNombreSeleccionado,e.mensajeNotificacion),e.mostrarToast("Notificaci\xf3n enviada exitosamente.","success"),e.equipoSeleccionado="",e.tipoNotificacion="",e.mensajeNotificacion="",e.equipoNombreSeleccionado=""}catch(a){console.error("Error al enviar la notificaci\xf3n: ",a),e.mostrarToast("Ocurri\xf3 un error al enviar la notificaci\xf3n.","danger")}})()}}return(t=c).\u0275fac=function(e){return new(e||t)(o.rXU(u._7),o.rXU(P.Ix),o.rXU(j.u),o.rXU(s.K_),o.rXU(po.c),o.rXU(R.Qq))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-notificaciones"]],decls:31,vars:4,consts:[["slot","start","fill","clear",3,"click"],["id","back","name","arrow-back"],["id","titulo"],[3,"ngSubmit"],["id","div"],["for","equipo","id","label"],["id","selec","name","equipo","required","",3,"ngModelChange","change","ngModel"],["id","opcion",3,"value",4,"ngFor","ngForOf"],["for","tipo","id","label"],["id","selec","name","tipo","required","",3,"ngModelChange","ngModel"],["id","opcion","value","partidos"],["id","opcion","value","actividades"],["id","opcion","value","ambos"],["for","mensaje","id","label"],["id","area","name","mensaje","required","",3,"ngModelChange","ngModel"],["id","boton","shape","round","expand","full","type","submit"],["id","opcion",3,"value"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0),o.bIt("click",function(){return n.irAPaginaDestino()}),o.nrm(3,"ion-icon",1),o.k0s(),o.j41(4,"ion-title",2),o.EFF(5,"Notificaciones"),o.k0s()()(),o.j41(6,"ion-content"),o.nrm(7,"ion-title"),o.j41(8,"ion-card")(9,"form",3),o.bIt("ngSubmit",function(){return n.enviarNotificacion()}),o.j41(10,"div",4)(11,"label",5),o.EFF(12,"Seleccionar Equipo:"),o.k0s(),o.j41(13,"select",6),o.mxI("ngModelChange",function(a){return o.DH7(n.equipoSeleccionado,a)||(n.equipoSeleccionado=a),a}),o.bIt("change",function(){return n.onEquipoChange(n.equipoSeleccionado)}),o.DNE(14,go,2,2,"option",7),o.k0s()(),o.j41(15,"div",4)(16,"label",8),o.EFF(17,"Tipo de Notificaci\xf3n:"),o.k0s(),o.j41(18,"select",9),o.mxI("ngModelChange",function(a){return o.DH7(n.tipoNotificacion,a)||(n.tipoNotificacion=a),a}),o.j41(19,"option",10),o.EFF(20,"Partidos"),o.k0s(),o.j41(21,"option",11),o.EFF(22,"Actividades"),o.k0s(),o.j41(23,"option",12),o.EFF(24,"Ambos"),o.k0s()()(),o.j41(25,"div",4)(26,"label",13),o.EFF(27,"Notificaci\xf3n:"),o.k0s(),o.j41(28,"textarea",14),o.mxI("ngModelChange",function(a){return o.DH7(n.mensajeNotificacion,a)||(n.mensajeNotificacion=a),a}),o.k0s()(),o.j41(29,"ion-button",15),o.EFF(30,"Enviar Notificaci\xf3n"),o.k0s()()()()),2&e&&(o.R7$(13),o.R50("ngModel",n.equipoSeleccionado),o.R7$(),o.Y8G("ngForOf",n.equipos),o.R7$(4),o.R50("ngModel",n.tipoNotificacion),o.R7$(10),o.R50("ngModel",n.mensajeNotificacion))},dependencies:[v.Sq,s.Jm,s.b_,s.W9,s.eU,s.iq,s.BC,s.ai,_.qT,_.xH,_.y7,_.me,_.wz,_.BC,_.cb,_.YS,_.vS,_.cV],styles:["ion-card[_ngcontent-%COMP%]{--box-shadow: 0px 4px 12px rgba(0, 0, 0, .1);border-radius:12px;margin-bottom:20px}#boton[_ngcontent-%COMP%]{margin:20px}#label[_ngcontent-%COMP%]{font-size:large;margin:10px;color:#fff;align-items:center}#div[_ngcontent-%COMP%]{margin-bottom:20px}#area[_ngcontent-%COMP%]{display:block;margin-bottom:20px;width:100%}#opcion[_ngcontent-%COMP%]{color:#fff}#selec[_ngcontent-%COMP%]{width:100%;margin-bottom:30px;display:block}"]}),c})()},{path:"",redirectTo:"Inicio",pathMatch:"full"}]},{path:"",redirectTo:"Inicio",pathMatch:"full"}];let ho=(()=>{var t;class c{}return(t=c).\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[P.iI.forChild(fo)]}),c})(),_o=(()=>{var t;class c{}return(t=c).\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[s.bv,v.MD,_.YN,ho,R.q1]}),c})()}}]);